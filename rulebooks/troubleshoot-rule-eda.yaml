- name: Read messages from a kafka topic and act on them
  hosts: all
  ## Define our source for events
  sources:   
    - ansible.eda.kafka:
        host: kafka.example.com
        port: 9092
        topic: quickstart-events

  rules:
    - name: debug with multiple messages
      condition: event.meta is defined
      action:
         debug:
           msg:
              - "Message 1 {{ event }}"

    - name: receive event for network update
      condition: event.payload.implement is defined
      action:
        print_event:
          pretty: true

